@model Hybriotheca.Web.Models.Entities.UserViewModel

<div class="grid gap-4 mb-4 sm:grid-cols-2">

    @* <!-- FIRST NAME --> *@
    <div>
        <label asp-for="FirstName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label>
        <input asp-for="FirstName" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Type user's first name" required="" />
        <span asp-validation-for="FirstName" class="p-4 mb-4 text-sm font-medium text-red-800 dark:text-red-400"></span>
    </div>

    @* <!-- LAST NAME --> *@
    <div>
        <label asp-for="LastName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label>
        <input asp-for="LastName" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Type user's last name" required="" />
        <span asp-validation-for="LastName" class="p-4 mb-4 text-sm font-medium text-red-800 dark:text-red-400"></span>
    </div>

    @* <!-- EMAIL --> *@
    <div>
        <label asp-for="Email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label>
        <input asp-for="Email" type="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Type user's email" />
        <span asp-validation-for="Email" class="p-4 mb-4 text-sm font-medium text-red-800 dark:text-red-400"></span>
    </div>

    @* <!-- PHONE NUMBER --> *@
    <div>
        <label asp-for="PhoneNumber" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label>
        <input asp-for="PhoneNumber" type="tel" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Type user's phone number" required="" />
        <span asp-validation-for="PhoneNumber" class="p-4 mb-4 text-sm font-medium text-red-800 dark:text-red-400"></span>
    </div>

    @* <!-- ROLES --> *@
    <div>
        <label asp-for="Role" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label>
        <select asp-for="Role" asp-items="ViewBag.Roles" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"></select>
        <span asp-validation-for="Role" class="p-4 mb-4 text-sm font-medium text-red-800 dark:text-red-400"></span>
    </div>

    @* <!-- SUBSCRIPTION --> *@
    <div>
        <label asp-for="SubscriptionID" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label>
        <select asp-for="SubscriptionID" asp-items="ViewBag.Subscriptions" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"></select>
        <span asp-validation-for="SubscriptionID" class="p-4 mb-4 text-sm font-medium text-red-800 dark:text-red-400"></span>
    </div>

    @* <!-- PROFILE PICTURE -->
    <div class="mb-3">
        <label asp-for="PhotoFile" class="form-label"></label>
        <a href="#PhotoFile" onclick="resetPhoto()" id="resetPhoto" style="display: none;">(Reset photo)</a>
        @if (Model?.HasPhoto ?? false)
        {
            <a href="#PhotoFile" onclick="deletePhoto()" id="deletePhoto" style="color: red;">(delete)</a>
            <input type="hidden" asp-for="DeletePhoto" />
        }

        <input type="file" asp-for="PhotoFile" class="form-control" onchange="uploadPhoto(event)" />

        <img src="@Model?.PhotoFullPath" alt="Image preview" id="Photo" style="max-width: 128px; max-height: 128px; margin: 16px 8px 0;" />

        <script>
            var anchorDeletePhoto = document.getElementById('deletePhoto');
            var inputDeletePhoto = document.getElementById('DeletePhoto');

            const uploadPhoto = event => {
                document.getElementById('Photo').src = URL.createObjectURL(event.target.files[0]);
                if (inputDeletePhoto != null) inputDeletePhoto.value = 'False';

                document.getElementById('resetPhoto').style.display = 'inline';
                if (anchorDeletePhoto != null) anchorDeletePhoto.style.display = 'inline';
            }

            const resetPhoto = () => {
                document.getElementById('PhotoFile').value = null;
                document.getElementById('Photo').src = '@Model?.PhotoFullPath';
                if (inputDeletePhoto != null) inputDeletePhoto.value = 'False';

                document.getElementById('resetPhoto').style.display = 'none';
                if (anchorDeletePhoto != null) anchorDeletePhoto.style.display = 'inline';
            }

            const deletePhoto = () => {
                document.getElementById('PhotoFile').value = null;
                document.getElementById('Photo').src = 'https://hybriotheca.blob.core.windows.net/userphotos/nophoto';
                if (inputDeletePhoto != null) inputDeletePhoto.value = 'True';

                document.getElementById('resetPhoto').style.display = 'inline';
                if (anchorDeletePhoto != null) anchorDeletePhoto.style.display = 'none';
            }
        </script>

        <span asp-validation-for="PhotoFile" class="text-danger"></span>
    </div>

</div>